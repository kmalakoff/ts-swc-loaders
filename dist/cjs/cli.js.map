{"version":3,"sources":["cli.cjs"],"sourcesContent":["const exit = require('exit');\nconst path = require('path');\nconst spawn = require('cross-spawn-cb');\nconst pathKey = require('env-path-key');\nconst prepend = require('path-string-prepend');\nconst spawnParams = require('./index.mjs').spawnParams;\n\nconst major = +process.versions.node.split('.')[0];\nconst type = major < 12 ? 'commonjs' : 'module';\n\nmodule.exports = function cli(args, options) {\n  const cwd = process.cwd();\n  const env = { ...process.env };\n  const PATH_KEY = pathKey();\n  env[PATH_KEY] = prepend(env[PATH_KEY] || '', path.resolve(__dirname, '..', '..', '..', 'node_modules', '.bin'));\n  env[PATH_KEY] = prepend(env[PATH_KEY] || '', path.resolve(process.cwd(), 'node_modules', '.bin'));\n  const params = spawnParams(type, { stdio: 'inherit', cwd, env, ...(options || {}) });\n\n  function callback(err) {\n    if (err) {\n      console.log(err.message);\n      return exit(err.code || -1);\n    }\n    exit(0);\n  }\n\n  if (params.options.NODE_OPTIONS || params.args[0] === '--require') {\n    spawn(args[0], params.args.concat(args.slice(1)), params.options, callback);\n  } else {\n    spawn('node', params.args.concat(args), params.options, callback);\n  }\n};\n"],"names":["exit","require","path","spawn","pathKey","prepend","spawnParams","major","process","versions","node","split","type","module","exports","cli","args","options","cwd","env","PATH_KEY","resolve","__dirname","params","stdio","callback","err","console","log","message","code","NODE_OPTIONS","concat","slice"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,OAAOC,QAAQ;AACrB,IAAMC,OAAOD,QAAQ;AACrB,IAAME,QAAQF,QAAQ;AACtB,IAAMG,UAAUH,QAAQ;AACxB,IAAMI,UAAUJ,QAAQ;AACxB,IAAMK,cAAcL,QAAQ,eAAeK,WAAW;AAEtD,IAAMC,QAAQ,CAACC,QAAQC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,IAAI,CAAC,EAAE;AAClD,IAAMC,OAAOL,QAAQ,KAAK,aAAa;AAEvCM,OAAOC,OAAO,GAAG,SAASC,IAAIC,IAAI,EAAEC,OAAO;IACzC,IAAMC,MAAMV,QAAQU,GAAG;IACvB,IAAMC,MAAM,mBAAKX,QAAQW,GAAG;IAC5B,IAAMC,WAAWhB;IACjBe,GAAG,CAACC,SAAS,GAAGf,QAAQc,GAAG,CAACC,SAAS,IAAI,IAAIlB,KAAKmB,OAAO,CAACC,WAAW,MAAM,MAAM,MAAM,gBAAgB;IACvGH,GAAG,CAACC,SAAS,GAAGf,QAAQc,GAAG,CAACC,SAAS,IAAI,IAAIlB,KAAKmB,OAAO,CAACb,QAAQU,GAAG,IAAI,gBAAgB;IACzF,IAAMK,SAASjB,YAAYM,MAAM;QAAEY,OAAO;QAAWN,KAAAA;QAAKC,KAAAA;OAASF,WAAW,CAAC;IAE/E,SAASQ,SAASC,GAAG;QACnB,IAAIA,KAAK;YACPC,QAAQC,GAAG,CAACF,IAAIG,OAAO;YACvB,OAAO7B,KAAK0B,IAAII,IAAI,IAAI,CAAC;QAC3B;QACA9B,KAAK;IACP;IAEA,IAAIuB,OAAON,OAAO,CAACc,YAAY,IAAIR,OAAOP,IAAI,CAAC,EAAE,KAAK,aAAa;QACjEb,MAAMa,IAAI,CAAC,EAAE,EAAEO,OAAOP,IAAI,CAACgB,MAAM,CAAChB,KAAKiB,KAAK,CAAC,KAAKV,OAAON,OAAO,EAAEQ;IACpE,OAAO;QACLtB,MAAM,QAAQoB,OAAOP,IAAI,CAACgB,MAAM,CAAChB,OAAOO,OAAON,OAAO,EAAEQ;IAC1D;AACF"}