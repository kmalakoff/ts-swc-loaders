{"version":3,"sources":["createMatcher.mjs"],"sourcesContent":["import micromatch from 'micromatch';\nimport path from 'path-posix';\nimport slash from 'slash';\n\nexport default function createMatcher(config) {\n  const configPath = path.dirname(slash(config.path));\n\n  function matchFn(condition) {\n    let pattern = slash(condition);\n    if (!path.isAbsolute(pattern) && !pattern.startsWith('*')) pattern = path.join(configPath, pattern);\n\n    return function match(filePath) {\n      return filePath.startsWith(pattern) || micromatch.isMatch(filePath, pattern);\n    };\n  }\n\n  const includes = (config.config.include || []).map(matchFn);\n  const excludes = (config.config.exclude || []).map(matchFn);\n\n  return function matcher(filePath) {\n    if (filePath.endsWith('.json')) return false;\n\n    filePath = slash(filePath);\n    for (let i = 0; i < excludes.length; ++i) {\n      if (excludes[i](filePath)) return false;\n    }\n    for (let j = 0; j < includes.length; ++j) {\n      if (includes[j](filePath)) return true;\n    }\n    return !includes.length;\n  };\n}\n"],"names":["createMatcher","config","configPath","path","dirname","slash","matchFn","condition","pattern","isAbsolute","startsWith","join","match","filePath","micromatch","isMatch","includes","include","map","excludes","exclude","matcher","endsWith","i","length","j"],"mappings":";;;;+BAIA;;;eAAwBA;;;iEAJD;gEACN;4DACC;;;;;;AAEH,SAASA,cAAcC,MAAM;IAC1C,IAAMC,aAAaC,kBAAI,CAACC,OAAO,CAACC,IAAAA,cAAK,EAACJ,OAAOE,IAAI;IAEjD,SAASG,QAAQC,SAAS;QACxB,IAAIC,UAAUH,IAAAA,cAAK,EAACE;QACpB,IAAI,CAACJ,kBAAI,CAACM,UAAU,CAACD,YAAY,CAACA,QAAQE,UAAU,CAAC,MAAMF,UAAUL,kBAAI,CAACQ,IAAI,CAACT,YAAYM;QAE3F,OAAO,SAASI,MAAMC,QAAQ;YAC5B,OAAOA,SAASH,UAAU,CAACF,YAAYM,mBAAU,CAACC,OAAO,CAACF,UAAUL;QACtE;IACF;IAEA,IAAMQ,WAAW,AAACf,CAAAA,OAAOA,MAAM,CAACgB,OAAO,IAAI,EAAE,AAAD,EAAGC,GAAG,CAACZ;IACnD,IAAMa,WAAW,AAAClB,CAAAA,OAAOA,MAAM,CAACmB,OAAO,IAAI,EAAE,AAAD,EAAGF,GAAG,CAACZ;IAEnD,OAAO,SAASe,QAAQR,QAAQ;QAC9B,IAAIA,SAASS,QAAQ,CAAC,UAAU,OAAO;QAEvCT,WAAWR,IAAAA,cAAK,EAACQ;QACjB,IAAK,IAAIU,IAAI,GAAGA,IAAIJ,SAASK,MAAM,EAAE,EAAED,EAAG;YACxC,IAAIJ,QAAQ,CAACI,EAAE,CAACV,WAAW,OAAO;QACpC;QACA,IAAK,IAAIY,IAAI,GAAGA,IAAIT,SAASQ,MAAM,EAAE,EAAEC,EAAG;YACxC,IAAIT,QAAQ,CAACS,EAAE,CAACZ,WAAW,OAAO;QACpC;QACA,OAAO,CAACG,SAASQ,MAAM;IACzB;AACF"}