{"version":3,"sources":["fileType.mjs"],"sourcesContent":["import path from 'path';\nimport packageUp from './packageUp.mjs';\nfunction isEntry(filePath, pkg, key) {\n  if (pkg.json[key] === undefined) return false;\n  const modulePath = path.resolve(pkg.dir, pkg.json[key]);\n  if (filePath === modulePath) return true;\n  const moduleDir = path.dirname(modulePath);\n  if (filePath.startsWith(moduleDir)) return true;\n  return false;\n}\nexport default function fileType(filePath) {\n  const pkg = packageUp(filePath);\n  if (!pkg) return 'commonjs';\n  if (isEntry(filePath, pkg, 'module')) return 'module';\n  if (isEntry(filePath, pkg, 'main')) return 'commonjs';\n  if (pkg.json.type) return pkg.json.type;\n  if (pkg.json.module) return 'module';\n  if (pkg.json.main) return 'commonjs';\n  return 'commonjs';\n}\n"],"names":["fileType","isEntry","filePath","pkg","key","json","undefined","modulePath","path","resolve","dir","moduleDir","dirname","startsWith","packageUp","type","module","main"],"mappings":";;;;+BAUA;;;eAAwBA;;;2DAVP;gEACK;;;;;;AACtB,SAASC,QAAQC,QAAQ,EAAEC,GAAG,EAAEC,GAAG;IACjC,IAAID,IAAIE,IAAI,CAACD,IAAI,KAAKE,WAAW,OAAO;IACxC,IAAMC,aAAaC,aAAI,CAACC,OAAO,CAACN,IAAIO,GAAG,EAAEP,IAAIE,IAAI,CAACD,IAAI;IACtD,IAAIF,aAAaK,YAAY,OAAO;IACpC,IAAMI,YAAYH,aAAI,CAACI,OAAO,CAACL;IAC/B,IAAIL,SAASW,UAAU,CAACF,YAAY,OAAO;IAC3C,OAAO;AACT;AACe,SAASX,SAASE,QAAQ;IACvC,IAAMC,MAAMW,IAAAA,kBAAS,EAACZ;IACtB,IAAI,CAACC,KAAK,OAAO;IACjB,IAAIF,QAAQC,UAAUC,KAAK,WAAW,OAAO;IAC7C,IAAIF,QAAQC,UAAUC,KAAK,SAAS,OAAO;IAC3C,IAAIA,IAAIE,IAAI,CAACU,IAAI,EAAE,OAAOZ,IAAIE,IAAI,CAACU,IAAI;IACvC,IAAIZ,IAAIE,IAAI,CAACW,MAAM,EAAE,OAAO;IAC5B,IAAIb,IAAIE,IAAI,CAACY,IAAI,EAAE,OAAO;IAC1B,OAAO;AACT"}