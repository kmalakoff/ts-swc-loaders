{"version":3,"sources":["fileType.mjs"],"sourcesContent":["import path from 'path';\nimport packageUp from './packageUp.mjs';\n\nfunction isEntry(filePath, pkg, key) {\n  if (pkg.json[key] === undefined) return false;\n  const modulePath = path.resolve(path.dirname(pkg.path), pkg.json[key]);\n  if (filePath === modulePath) return true;\n  const moduleDir = path.dirname(modulePath);\n  if (filePath.startsWith(moduleDir)) return true;\n  return false;\n}\n\nexport default function fileType(filePath) {\n  const pkg = packageUp(filePath);\n  if (!pkg) return 'commonjs';\n  if (isEntry(filePath, pkg, 'module')) return 'module';\n  if (isEntry(filePath, pkg, 'main')) return 'commonjs';\n  if (pkg.json.type) return pkg.json.type;\n  return pkg.json.module ? 'module' : 'commonjs';\n}\n"],"names":["fileType","isEntry","filePath","pkg","key","json","undefined","modulePath","path","resolve","dirname","moduleDir","startsWith","packageUp","type","module"],"mappings":";;;;+BAYA;;;eAAwBA;;;2DAZP;gEACK;;;;;;AAEtB,SAASC,QAAQC,QAAQ,EAAEC,GAAG,EAAEC,GAAG;IACjC,IAAID,IAAIE,IAAI,CAACD,IAAI,KAAKE,WAAW,OAAO;IACxC,IAAMC,aAAaC,aAAI,CAACC,OAAO,CAACD,aAAI,CAACE,OAAO,CAACP,IAAIK,IAAI,GAAGL,IAAIE,IAAI,CAACD,IAAI;IACrE,IAAIF,aAAaK,YAAY,OAAO;IACpC,IAAMI,YAAYH,aAAI,CAACE,OAAO,CAACH;IAC/B,IAAIL,SAASU,UAAU,CAACD,YAAY,OAAO;IAC3C,OAAO;AACT;AAEe,SAASX,SAASE,QAAQ;IACvC,IAAMC,MAAMU,IAAAA,kBAAS,EAACX;IACtB,IAAI,CAACC,KAAK,OAAO;IACjB,IAAIF,QAAQC,UAAUC,KAAK,WAAW,OAAO;IAC7C,IAAIF,QAAQC,UAAUC,KAAK,SAAS,OAAO;IAC3C,IAAIA,IAAIE,IAAI,CAACS,IAAI,EAAE,OAAOX,IAAIE,IAAI,CAACS,IAAI;IACvC,OAAOX,IAAIE,IAAI,CAACU,MAAM,GAAG,WAAW;AACtC"}