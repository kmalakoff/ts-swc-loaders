{"version":3,"sources":["packageUp.mjs"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\nconst packageJSONCache = new Map();\nfunction getPackage(packagePath) {\n  const existing = packageJSONCache.get(packagePath);\n  if (existing !== undefined) return existing;\n\n  try {\n    const packageJson = JSON.parse(fs.readFileSync(packagePath, 'utf8'));\n    packageJSONCache.set(packagePath, packageJson);\n    return packageJson;\n  } catch (_err) {\n    packageJSONCache.set(packagePath, null);\n    return null;\n  }\n}\n\nexport default function packageUp(filePath) {\n  let packageDir = filePath;\n  while (packageDir) {\n    if (packageDir.endsWith('node_modules')) break;\n    const packagePath = path.join(packageDir, 'package.json');\n    const json = getPackage(packagePath);\n    if (json) return { json, path: packagePath };\n    packageDir = path.dirname(packageDir);\n  }\n  return null;\n}\n"],"names":["packageUp","packageJSONCache","Map","getPackage","packagePath","existing","get","undefined","packageJson","JSON","parse","fs","readFileSync","set","_err","filePath","packageDir","endsWith","path","join","json","dirname"],"mappings":";;;;+BAkBA;;;eAAwBA;;;yDAlBT;2DACE;;;;;;AAEjB,IAAMC,mBAAmB,IAAIC;AAC7B,SAASC,WAAWC,WAAW;IAC7B,IAAMC,WAAWJ,iBAAiBK,GAAG,CAACF;IACtC,IAAIC,aAAaE,WAAW,OAAOF;IAEnC,IAAI;QACF,IAAMG,cAAcC,KAAKC,KAAK,CAACC,WAAE,CAACC,YAAY,CAACR,aAAa;QAC5DH,iBAAiBY,GAAG,CAACT,aAAaI;QAClC,OAAOA;IACT,EAAE,OAAOM,MAAM;QACbb,iBAAiBY,GAAG,CAACT,aAAa;QAClC,OAAO;IACT;AACF;AAEe,SAASJ,UAAUe,QAAQ;IACxC,IAAIC,aAAaD;IACjB,MAAOC,WAAY;QACjB,IAAIA,WAAWC,QAAQ,CAAC,iBAAiB;QACzC,IAAMb,cAAcc,aAAI,CAACC,IAAI,CAACH,YAAY;QAC1C,IAAMI,OAAOjB,WAAWC;QACxB,IAAIgB,MAAM,OAAO;YAAEA,MAAAA;YAAMF,MAAMd;QAAY;QAC3CY,aAAaE,aAAI,CAACG,OAAO,CAACL;IAC5B;IACA,OAAO;AACT"}