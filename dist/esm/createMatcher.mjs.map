{"version":3,"sources":["createMatcher.mjs"],"sourcesContent":["import minimatch from 'minimatch';\nimport path from 'path-posix';\nimport slash from 'slash';\n\nexport default function createMatcher(config) {\n  const configPath = path.dirname(slash(config.path));\n\n  function matchFn(condition) {\n    let pattern = slash(condition);\n    if (!path.isAbsolute(pattern) && !pattern.startsWith('*')) pattern = path.join(configPath, pattern);\n\n    return function match(filePath) {\n      return filePath.startsWith(pattern) || minimatch(filePath, pattern);\n    };\n  }\n\n  const includes = (config.config.include || []).map(matchFn);\n  const excludes = (config.config.exclude || []).map(matchFn);\n\n  return function matcher(filePath) {\n    if (filePath.endsWith('.json')) return false;\n\n    filePath = slash(filePath);\n    for (let j = 0; j < includes.length; ++j) {\n      if (includes[j](filePath)) return true;\n    }\n    for (let i = 0; i < excludes.length; ++i) {\n      if (excludes[i](filePath)) return false;\n    }\n    return !includes.length;\n  };\n}\n"],"names":["minimatch","path","slash","createMatcher","config","configPath","dirname","matchFn","condition","pattern","isAbsolute","startsWith","join","match","filePath","includes","include","map","excludes","exclude","matcher","endsWith","j","length","i"],"mappings":"AAAA,OAAOA,eAAe,YAAY;AAClC,OAAOC,UAAU,aAAa;AAC9B,OAAOC,WAAW,QAAQ;AAE1B,eAAe,SAASC,cAAcC,MAAM;IAC1C,MAAMC,aAAaJ,KAAKK,OAAO,CAACJ,MAAME,OAAOH,IAAI;IAEjD,SAASM,QAAQC,SAAS;QACxB,IAAIC,UAAUP,MAAMM;QACpB,IAAI,CAACP,KAAKS,UAAU,CAACD,YAAY,CAACA,QAAQE,UAAU,CAAC,MAAMF,UAAUR,KAAKW,IAAI,CAACP,YAAYI;QAE3F,OAAO,SAASI,MAAMC,QAAQ;YAC5B,OAAOA,SAASH,UAAU,CAACF,YAAYT,UAAUc,UAAUL;QAC7D;IACF;IAEA,MAAMM,WAAW,AAACX,CAAAA,OAAOA,MAAM,CAACY,OAAO,IAAI,EAAE,AAAD,EAAGC,GAAG,CAACV;IACnD,MAAMW,WAAW,AAACd,CAAAA,OAAOA,MAAM,CAACe,OAAO,IAAI,EAAE,AAAD,EAAGF,GAAG,CAACV;IAEnD,OAAO,SAASa,QAAQN,QAAQ;QAC9B,IAAIA,SAASO,QAAQ,CAAC,UAAU,OAAO;QAEvCP,WAAWZ,MAAMY;QACjB,IAAK,IAAIQ,IAAI,GAAGA,IAAIP,SAASQ,MAAM,EAAE,EAAED,EAAG;YACxC,IAAIP,QAAQ,CAACO,EAAE,CAACR,WAAW,OAAO;QACpC;QACA,IAAK,IAAIU,IAAI,GAAGA,IAAIN,SAASK,MAAM,EAAE,EAAEC,EAAG;YACxC,IAAIN,QAAQ,CAACM,EAAE,CAACV,WAAW,OAAO;QACpC;QACA,OAAO,CAACC,SAASQ,MAAM;IACzB;AACF"}