{"version":3,"sources":["fileType.mjs"],"sourcesContent":["import path from 'path';\nimport packageUp from './packageUp.mjs';\n\nfunction isEntry(filePath, pkg, key) {\n  if (pkg.json[key] === undefined) return false;\n  const modulePath = path.resolve(path.dirname(pkg.path), pkg.json[key]);\n  if (filePath === modulePath) return true;\n  const moduleDir = path.dirname(modulePath);\n  if (filePath.startsWith(moduleDir)) return true;\n  return false;\n}\n\nexport default function fileType(filePath) {\n  const pkg = packageUp(filePath);\n  if (!pkg) return 'commonjs';\n  if (isEntry(filePath, pkg, 'module')) return 'module';\n  if (isEntry(filePath, pkg, 'main')) return 'commonjs';\n  if (pkg.json.type) return pkg.json.type;\n  return pkg.json.module ? 'module' : 'commonjs';\n}\n"],"names":["path","packageUp","isEntry","filePath","pkg","key","json","undefined","modulePath","resolve","dirname","moduleDir","startsWith","fileType","type","module"],"mappings":"AAAA,OAAOA,UAAU,OAAO;AACxB,OAAOC,eAAe,kBAAkB;AAExC,SAASC,QAAQC,QAAQ,EAAEC,GAAG,EAAEC,GAAG;IACjC,IAAID,IAAIE,IAAI,CAACD,IAAI,KAAKE,WAAW,OAAO;IACxC,MAAMC,aAAaR,KAAKS,OAAO,CAACT,KAAKU,OAAO,CAACN,IAAIJ,IAAI,GAAGI,IAAIE,IAAI,CAACD,IAAI;IACrE,IAAIF,aAAaK,YAAY,OAAO;IACpC,MAAMG,YAAYX,KAAKU,OAAO,CAACF;IAC/B,IAAIL,SAASS,UAAU,CAACD,YAAY,OAAO;IAC3C,OAAO;AACT;AAEA,eAAe,SAASE,SAASV,QAAQ;IACvC,MAAMC,MAAMH,UAAUE;IACtB,IAAI,CAACC,KAAK,OAAO;IACjB,IAAIF,QAAQC,UAAUC,KAAK,WAAW,OAAO;IAC7C,IAAIF,QAAQC,UAAUC,KAAK,SAAS,OAAO;IAC3C,IAAIA,IAAIE,IAAI,CAACQ,IAAI,EAAE,OAAOV,IAAIE,IAAI,CAACQ,IAAI;IACvC,OAAOV,IAAIE,IAAI,CAACS,MAAM,GAAG,WAAW;AACtC"}