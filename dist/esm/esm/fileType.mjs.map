{"version":3,"sources":["fileType.mjs"],"sourcesContent":["import path from 'path';\nimport packageUp from './packageUp.mjs';\nfunction isEntry(filePath, pkg, key) {\n  if (pkg.json[key] === undefined) return false;\n  const modulePath = path.resolve(pkg.dir, pkg.json[key]);\n  if (filePath === modulePath) return true;\n  const moduleDir = path.dirname(modulePath);\n  if (filePath.startsWith(moduleDir)) return true;\n  return false;\n}\nexport default function fileType(filePath) {\n  const pkg = packageUp(filePath);\n  if (!pkg) return 'commonjs';\n  if (isEntry(filePath, pkg, 'module')) return 'module';\n  if (isEntry(filePath, pkg, 'main')) return 'commonjs';\n  if (pkg.json.type) return pkg.json.type;\n  if (pkg.json.module) return 'module';\n  if (pkg.json.main) return 'commonjs';\n  return 'commonjs';\n}\n"],"names":["path","packageUp","isEntry","filePath","pkg","key","json","undefined","modulePath","resolve","dir","moduleDir","dirname","startsWith","fileType","type","module","main"],"mappings":"AAAA,OAAOA,UAAU,OAAO;AACxB,OAAOC,eAAe,kBAAkB;AACxC,SAASC,QAAQC,QAAQ,EAAEC,GAAG,EAAEC,GAAG;IACjC,IAAID,IAAIE,IAAI,CAACD,IAAI,KAAKE,WAAW,OAAO;IACxC,MAAMC,aAAaR,KAAKS,OAAO,CAACL,IAAIM,GAAG,EAAEN,IAAIE,IAAI,CAACD,IAAI;IACtD,IAAIF,aAAaK,YAAY,OAAO;IACpC,MAAMG,YAAYX,KAAKY,OAAO,CAACJ;IAC/B,IAAIL,SAASU,UAAU,CAACF,YAAY,OAAO;IAC3C,OAAO;AACT;AACA,eAAe,SAASG,SAASX,QAAQ;IACvC,MAAMC,MAAMH,UAAUE;IACtB,IAAI,CAACC,KAAK,OAAO;IACjB,IAAIF,QAAQC,UAAUC,KAAK,WAAW,OAAO;IAC7C,IAAIF,QAAQC,UAAUC,KAAK,SAAS,OAAO;IAC3C,IAAIA,IAAIE,IAAI,CAACS,IAAI,EAAE,OAAOX,IAAIE,IAAI,CAACS,IAAI;IACvC,IAAIX,IAAIE,IAAI,CAACU,MAAM,EAAE,OAAO;IAC5B,IAAIZ,IAAIE,IAAI,CAACW,IAAI,EAAE,OAAO;IAC1B,OAAO;AACT"}