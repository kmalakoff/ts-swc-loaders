{"version":3,"sources":["packageUp.mjs"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\nconst packageJSONCache = new Map();\nfunction getPackage(packagePath) {\n  const existing = packageJSONCache.get(packagePath);\n  if (existing !== undefined) return existing;\n\n  try {\n    const packageJson = JSON.parse(fs.readFileSync(packagePath, 'utf8'));\n    packageJSONCache.set(packagePath, packageJson);\n    return packageJson;\n  } catch (_err) {\n    packageJSONCache.set(packagePath, null);\n    return null;\n  }\n}\n\nexport default function packageUp(filePath) {\n  let dir = filePath;\n  while (dir) {\n    if (dir.endsWith('node_modules')) break;\n    const json = getPackage(path.join(dir, 'package.json'));\n    if (json) return { json, dir };\n    dir = path.dirname(dir);\n  }\n  return null;\n}\n"],"names":["fs","path","packageJSONCache","Map","getPackage","packagePath","existing","get","undefined","packageJson","JSON","parse","readFileSync","set","_err","packageUp","filePath","dir","endsWith","json","join","dirname"],"mappings":"AAAA,OAAOA,QAAQ,KAAK;AACpB,OAAOC,UAAU,OAAO;AAExB,MAAMC,mBAAmB,IAAIC;AAC7B,SAASC,WAAWC,WAAW;IAC7B,MAAMC,WAAWJ,iBAAiBK,GAAG,CAACF;IACtC,IAAIC,aAAaE,WAAW,OAAOF;IAEnC,IAAI;QACF,MAAMG,cAAcC,KAAKC,KAAK,CAACX,GAAGY,YAAY,CAACP,aAAa;QAC5DH,iBAAiBW,GAAG,CAACR,aAAaI;QAClC,OAAOA;IACT,EAAE,OAAOK,MAAM;QACbZ,iBAAiBW,GAAG,CAACR,aAAa;QAClC,OAAO;IACT;AACF;AAEA,eAAe,SAASU,UAAUC,QAAQ;IACxC,IAAIC,MAAMD;IACV,MAAOC,IAAK;QACV,IAAIA,IAAIC,QAAQ,CAAC,iBAAiB;QAClC,MAAMC,OAAOf,WAAWH,KAAKmB,IAAI,CAACH,KAAK;QACvC,IAAIE,MAAM,OAAO;YAAEA;YAAMF;QAAI;QAC7BA,MAAMhB,KAAKoB,OAAO,CAACJ;IACrB;IACA,OAAO;AACT"}